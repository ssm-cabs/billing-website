## Repository Details

This repository contains the billing and ride entry web application for SSM Cabs.
SSM Cabs provides corporate companies with cab facilities.

### Core Domain

- Cab types include sedan, SUV, tempo traveller, and other fleet variants.
- Each corporate company has its own pricing model.
- Pricing depends on car type and time slots (for example: 4hr, 6hr, 12hr).

### Primary Users

- SSM Cabs office staff use the website daily for ride entry and billing.

### Key Capabilities

- Add, view, edit, and delete ride entries for any corporate company.
- Generate billing and invoices on a monthly basis.

## Website Pages

Recommended pages for the web app:

- Login (optional if you add authentication)
- Dashboard (monthly snapshot, recent entries)
- Ride Entries List (filter by company and date)
- New Entry (create ride entry)
- Edit Entry (update or delete an entry)
- Companies (manage corporate company list)
- Pricing (per-company cab type and slot rates)
- Invoices (monthly billing and invoice generation)
- Settings (year file selection, sheet mapping, API token)

## Backend Details (Google Sheets + Apps Script)

### Data Storage

- Use one spreadsheet per year (example: SSM-2026-Billing).
- Each corporate company has its own sheet (tab) inside the yearly file.
- All company sheets follow the same column schema for consistent reporting.

### Recommended Sheet Schema

Required columns (left to right):

- entry_id (unique, generated by backend)
- entry_date (YYYY-MM-DD)
- company_name
- cab_type (sedan, suv, tempo-traveller, etc.)
- slot (4hr, 6hr, 12hr, etc.)
- rate
- amount
- pickup_location
- drop_location
- driver_name
- vehicle_number
- notes
- created_at (ISO timestamp)
- updated_at (ISO timestamp)

### Pricing Data

- Add a Pricing sheet inside the same file.
- Columns: company_name, cab_type, slot, rate.
- Backend uses this for auto-calculation when creating or editing entries.

### API Layer

- Google Apps Script acts as the backend API.
- API endpoints perform CRUD operations for entries and expose pricing data.
- GitHub Pages frontend calls the Apps Script web app endpoint.

Suggested endpoints:

- POST /entries -> create entry
- GET /entries?company=NAME&date=YYYY-MM -> list entries
- PUT /entries/:entry_id -> update entry
- DELETE /entries/:entry_id -> delete entry
- GET /pricing?company=NAME -> list pricing rules

### Security

- Protect the Apps Script endpoint with a shared secret token.
- Validate required fields and input formats on the server.
- Restrict spreadsheet access to SSM Cabs accounts only.

### Limits and Notes

- Google Apps Script has daily quotas; 300 entries/day should be fine.
- Avoid concurrent edits to the same row to prevent conflicts.
- Keep company sheet names consistent with the company list in the UI.
